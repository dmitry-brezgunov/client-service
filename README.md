# Employee contacts API

## Описание
Приложение для отслеживания контактов работников с клиентами.

## Стек
Python 3.9, Django 3.1, DjangoRestFramework 3.12, Django-Filter 2.4, djangorestframework-csv 2.1

## Функциональные возможности
- Создание, изменение, удаление сотрудников. Поля: имя (name), должность (position), список контактов (contacts).
- Создание, изменение, удаление клиентов. Поля: имя (name), возраст (age), адрес (adress).
- Добавление связи между сотрудником и клиентом. Поля: дата контактирования (date), id клиента (client), id сотрудника (employee).
- Выгрузка csv-файла со списком контактов сотрудников с клиентами в промежуток времени между заданными датами. Принимает на вход параметры date_from и date_to для фильтрации по дате контактирования.

## Запуск проекта
На локальном компьютере должен быть установлен Python 3.9

1. Склонировать данный репозиторий на свой локальный компьютер.
2. В корневой директории проекта установить виртуальное окружение командой `python -m venv venv`.
3. Установить необходимые библиотеки используя командой `pip install -r requirements.txt`.
4. Выполнить миграции командой `python manage.py migrate`.
5. Запустить локальный сервер командой `python manage.py runserver`.

Приложение будет доступно на локальном сервере - http://127.0.0.1:8000/

## Доступные методы API

Endpoint | Методы | Описание
------------ | ------------- | -------------
api/clients/ | GET, POST | GET запрос для получения списка клиентов. POST запрос для добавления нового клиента.
api/clients/{int:id}/ | GET, PUT, PATCH, DELETE | Получить, изменить, удалить клиента по id.
api/employees/ | GET, POST | GET запрос для получения списка сотрудников. POST запрос для добавления нового сотрудника.
api/employees/{int:id}/ | GET, PUT, PATCH, DELETE | Получить, изменить, удалить сотрудника по id.
api/employees/{int:id}/add_contact/ | POST | Добавить связь между сотрудником с соответствующим id и клиентом. В теле запроса необходимо передать id клиента и дату контактирвания в формате %d.%m.%Y
api/contacts-csv/ | GET | Выгрузить CSV файл со списком контактов сотрудников с клиентами. Принимает параметры date_from и date_to для фильтрации списка по дате (включительно) от и до соответсвенно.

## Пример запроса
**Фильтрация списка контактов**
```
import requests
 
url = 'http://127.0.0.1/api/contacts-csv/'
params = {
     'date_from': '01.12.2020',
     'date_to': '31.12.2020'
 }
r = requests.get(url, params=params,  headers=headers)
```
Список контактов можно фильтровать по дате. Для это в параметрах get запроса нужно передать 'date_from' для фильтрации задач с датой выполнения больше или равной указанной, 'date_to' для фильтрации задач с датой выполнения меньше или равной указанной. Форматы даты - `%d.%m.%Y`.
